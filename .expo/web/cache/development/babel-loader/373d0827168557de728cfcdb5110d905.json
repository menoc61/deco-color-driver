{"ast":null,"code":"import _defineProperty from \"@babel/runtime/helpers/defineProperty\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\n\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport { useRef, useMemo } from \"react\";\nimport View from \"react-native-web/dist/exports/View\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport Pressable from \"react-native-web/dist/exports/Pressable\";\nimport BottomSheet from \"@gorhom/bottom-sheet\";\nimport { FontAwesome5, Fontisto } from \"@expo/vector-icons\";\nimport styles from \"./styles\";\nimport { useOrderContext } from \"../../contexts/OrderContext\";\nimport { useNavigation } from \"@react-navigation/native\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nvar STATUS_TO_TITLE = {\n  READY_FOR_PICKUP: \"Accept Order\",\n  ACCEPTED: \"Pick-Up Order\",\n  PICKED_UP: \"Complete Delivery\"\n};\n\nvar BottomSheetDetails = function BottomSheetDetails(props) {\n  var totalKm = props.totalKm,\n      totalMinutes = props.totalMinutes,\n      onAccepted = props.onAccepted;\n  var isDriverClose = totalKm <= 1;\n\n  var _useOrderContext = useOrderContext(),\n      order = _useOrderContext.order,\n      user = _useOrderContext.user,\n      services = _useOrderContext.services,\n      acceptOrder = _useOrderContext.acceptOrder,\n      completeOrder = _useOrderContext.completeOrder,\n      pickUpOrder = _useOrderContext.pickUpOrder;\n\n  var bottomSheetRef = useRef(null);\n  var snapPoints = useMemo(function () {\n    return [\"12%\", \"95%\"];\n  }, []);\n  var navigation = useNavigation();\n\n  var onButtonPressed = function onButtonPressed() {\n    var status, _bottomSheetRef$curre, _bottomSheetRef$curre2, _bottomSheetRef$curre3;\n\n    return _regeneratorRuntime.async(function onButtonPressed$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            status = order.status;\n\n            if (!(status === \"READY_FOR_PICKUP\")) {\n              _context.next = 8;\n              break;\n            }\n\n            (_bottomSheetRef$curre = bottomSheetRef.current) == null ? void 0 : _bottomSheetRef$curre.collapse();\n            _context.next = 5;\n            return _regeneratorRuntime.awrap(acceptOrder());\n\n          case 5:\n            onAccepted();\n            _context.next = 19;\n            break;\n\n          case 8:\n            if (!(status === \"ACCEPTED\")) {\n              _context.next = 14;\n              break;\n            }\n\n            (_bottomSheetRef$curre2 = bottomSheetRef.current) == null ? void 0 : _bottomSheetRef$curre2.collapse();\n            _context.next = 12;\n            return _regeneratorRuntime.awrap(pickUpOrder());\n\n          case 12:\n            _context.next = 19;\n            break;\n\n          case 14:\n            if (!(status === \"PICKED_UP\")) {\n              _context.next = 19;\n              break;\n            }\n\n            _context.next = 17;\n            return _regeneratorRuntime.awrap(completeOrder());\n\n          case 17:\n            (_bottomSheetRef$curre3 = bottomSheetRef.current) == null ? void 0 : _bottomSheetRef$curre3.collapse();\n            navigation.goBack();\n\n          case 19:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, null, null, null, Promise);\n  };\n\n  var isButtonDisabled = function isButtonDisabled() {\n    var status = order.status;\n\n    if (status === \"READY_FOR_PICKUP\") {\n      return false;\n    }\n\n    if ((status === \"ACCEPTED\" || status === \"PICKED_UP\") && isDriverClose) {\n      return false;\n    }\n\n    return true;\n  };\n\n  return _jsxs(BottomSheet, {\n    ref: bottomSheetRef,\n    snapPoints: snapPoints,\n    handleIndicatorStyle: styles.handleIndicator,\n    children: [_jsxs(View, {\n      style: styles.handleIndicatorContainer,\n      children: [_jsxs(Text, {\n        style: styles.routeDetailsText,\n        children: [totalMinutes.toFixed(0), \" min\"]\n      }), _jsx(FontAwesome5, {\n        name: \"shopping-bag\",\n        size: 30,\n        color: \"#3FC060\",\n        style: {\n          marginHorizontal: 10\n        }\n      }), _jsxs(Text, {\n        style: styles.routeDetailsText,\n        children: [totalKm.toFixed(2), \" km\"]\n      })]\n    }), _jsxs(View, {\n      style: styles.deliveryDetailsContainer,\n      children: [_jsx(Text, {\n        style: styles.companyName,\n        children: order.Company.name\n      }), _jsxs(View, {\n        style: styles.adressContainer,\n        children: [_jsx(Fontisto, {\n          name: \"shopping-store\",\n          size: 22,\n          color: \"grey\"\n        }), _jsx(Text, {\n          style: styles.adressText,\n          children: order.Company.address\n        })]\n      }), _jsxs(View, {\n        style: styles.adressContainer,\n        children: [_jsx(FontAwesome5, {\n          name: \"map-marker-alt\",\n          size: 30,\n          color: \"grey\"\n        }), _jsx(Text, {\n          style: styles.adressText,\n          children: user == null ? void 0 : user.address\n        })]\n      }), _jsx(View, {\n        style: styles.orderDetailsContainer,\n        children: services == null ? void 0 : services.map(function (serviceItem) {\n          return _jsxs(Text, {\n            style: styles.orderItemText,\n            children: [serviceItem.Service.name, \" x\", serviceItem.quantity]\n          }, serviceItem.id);\n        })\n      })]\n    }), _jsx(Pressable, {\n      style: _objectSpread(_objectSpread({}, styles.buttonContainer), {}, {\n        backgroundColor: isButtonDisabled() ? \"grey\" : \"#3FC060\"\n      }),\n      onPress: onButtonPressed,\n      disabled: isButtonDisabled(),\n      children: _jsx(Text, {\n        style: styles.buttonText,\n        children: STATUS_TO_TITLE[order.status]\n      })\n    })]\n  });\n};\n\nexport default BottomSheetDetails;","map":{"version":3,"names":["useRef","useMemo","BottomSheet","FontAwesome5","Fontisto","styles","useOrderContext","useNavigation","STATUS_TO_TITLE","READY_FOR_PICKUP","ACCEPTED","PICKED_UP","BottomSheetDetails","props","totalKm","totalMinutes","onAccepted","isDriverClose","order","user","services","acceptOrder","completeOrder","pickUpOrder","bottomSheetRef","snapPoints","navigation","onButtonPressed","status","current","collapse","goBack","isButtonDisabled","handleIndicator","handleIndicatorContainer","routeDetailsText","toFixed","marginHorizontal","deliveryDetailsContainer","companyName","Company","name","adressContainer","adressText","address","orderDetailsContainer","map","serviceItem","orderItemText","Service","quantity","id","buttonContainer","backgroundColor","buttonText"],"sources":["C:/Users/MENO/Desktop/PROJECT/APP-DECO-COLOR/deco-color-driver/src/screens/OrderDelivery/BottomSheetDetails.js"],"sourcesContent":["import { useRef, useMemo } from \"react\";\nimport { View, Text, Pressable } from \"react-native\";\nimport BottomSheet from \"@gorhom/bottom-sheet\";\nimport { FontAwesome5, Fontisto } from \"@expo/vector-icons\";\nimport styles from \"./styles\";\nimport { useOrderContext } from \"../../contexts/OrderContext\";\nimport { useNavigation } from \"@react-navigation/native\";\n\nconst STATUS_TO_TITLE = {\n  READY_FOR_PICKUP: \"Accept Order\",\n  ACCEPTED: \"Pick-Up Order\",\n  PICKED_UP: \"Complete Delivery\",\n};\n\nconst BottomSheetDetails = (props) => {\n  const { totalKm, totalMinutes, onAccepted } = props;\n  const isDriverClose = totalKm <= 1; // decrease for higher accuracy\n\n  const { order, user, services, acceptOrder, completeOrder, pickUpOrder } =\n    useOrderContext();\n\n  const bottomSheetRef = useRef(null);\n  const snapPoints = useMemo(() => [\"12%\", \"95%\"], []);\n\n  const navigation = useNavigation();\n\n  const onButtonPressed = async () => {\n    const { status } = order;\n    if (status === \"READY_FOR_PICKUP\") {\n      bottomSheetRef.current?.collapse();\n      await acceptOrder();\n      onAccepted();\n    } else if (status === \"ACCEPTED\") {\n      bottomSheetRef.current?.collapse();\n      await pickUpOrder();\n    } else if (status === \"PICKED_UP\") {\n      await completeOrder();\n      bottomSheetRef.current?.collapse();\n      navigation.goBack();\n    }\n  };\n\n  const isButtonDisabled = () => {\n    const { status } = order;\n    if (status === \"READY_FOR_PICKUP\") {\n      return false;\n    }\n    if ((status === \"ACCEPTED\" || status === \"PICKED_UP\") && isDriverClose) {\n      return false;\n    }\n    return true;\n  };\n\n  return (\n    <BottomSheet\n      ref={bottomSheetRef}\n      snapPoints={snapPoints}\n      handleIndicatorStyle={styles.handleIndicator}\n    >\n      <View style={styles.handleIndicatorContainer}>\n        <Text style={styles.routeDetailsText}>\n          {totalMinutes.toFixed(0)} min\n        </Text>\n        <FontAwesome5\n          name=\"shopping-bag\"\n          size={30}\n          color=\"#3FC060\"\n          style={{ marginHorizontal: 10 }}\n        />\n        <Text style={styles.routeDetailsText}>{totalKm.toFixed(2)} km</Text>\n      </View>\n      <View style={styles.deliveryDetailsContainer}>\n        <Text style={styles.companyName}>{order.Company.name}</Text>\n        <View style={styles.adressContainer}>\n          <Fontisto name=\"shopping-store\" size={22} color=\"grey\" />\n          <Text style={styles.adressText}>{order.Company.address}</Text>\n        </View>\n\n        <View style={styles.adressContainer}>\n          <FontAwesome5 name=\"map-marker-alt\" size={30} color=\"grey\" />\n          <Text style={styles.adressText}>{user?.address}</Text>\n        </View>\n\n        <View style={styles.orderDetailsContainer}>\n          {services?.map((serviceItem) => (\n            <Text style={styles.orderItemText} key={serviceItem.id}>\n              {serviceItem.Service.name} x{serviceItem.quantity}\n            </Text>\n          ))}\n        </View>\n      </View>\n      <Pressable\n        style={{\n          ...styles.buttonContainer,\n          backgroundColor: isButtonDisabled() ? \"grey\" : \"#3FC060\",\n        }}\n        onPress={onButtonPressed}\n        disabled={isButtonDisabled()}\n      >\n        <Text style={styles.buttonText}>{STATUS_TO_TITLE[order.status]}</Text>\n      </Pressable>\n    </BottomSheet>\n  );\n};\n\nexport default BottomSheetDetails;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}